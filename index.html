<!DOCTYPE html>
<html lang="am">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kids Math Game - Faruk, Mursi, Veronica, Selamn, Hafiz</title>
<style>
  body {
    background: linear-gradient(to right, #f9f9f9, #e3f2fd);
    font-family: "Comic Sans MS", sans-serif;
    text-align: center;
    padding: 20px;
    overflow: hidden; /* Hide overflow to prevent scrollbars from stars */
  }
  h1 {
    color: #2c3e50;
  }
  .game-container {
    max-width: 500px;
    margin: 0 auto;
  }
  .question-box {
    background: white;
    padding: 20px;
    margin: 20px auto;
    border-radius: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  button {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    font-size: 16px;
    margin-top: 10px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  button:hover {
    background-color: #45a049;
  }
  #muteBtn {
    background-color: #f44336;
    position: fixed;
    top: 15px;
    right: 15px;
    padding: 8px 12px;
  }
  #muteBtn:hover {
    background-color: #d32f2f;
  }
  #scoreboard {
    background: #ffffff;
    padding: 10px 20px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
  }
  #scoreboard h2 {
    margin: 0 0 10px 0;
    color: #34495e;
  }
  #score-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    justify-content: space-around;
    font-size: 1.1em;
  }

  /* --- Star Animation --- */
  .star {
    position: absolute;
    top: -20px; /* Start above the screen */
    color: gold;
    font-size: 24px;
    animation: fall linear;
    pointer-events: none; /* Make stars unclickable */
  }

  @keyframes fall {
    to {
      transform: translateY(100vh);
      opacity: 0;
    }
  }

</style>
</head>
<body>

<audio id="background-music" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>

<div class="game-container">
  <button id="muteBtn" onclick="toggleMute()">Mute</button>

  <h1>Welcome to the Math Game</h1>
  
  <div id="scoreboard">
    <h2>Scores</h2>
    <ul id="score-list"></ul>
  </div>

  <h2 id="playerName"></h2>
  <div class="question-box">
    <h3 id="question"></h3>
    <input type="number" id="answer" placeholder="Your answer">
    <br>
    <button onclick="checkAnswer()">Submit</button>
  </div>
</div>

<script>
// --- DOM Elements ---
const playerNameEl = document.getElementById("playerName");
const questionEl = document.getElementById("question");
const answerEl = document.getElementById("answer");
const scoreListEl = document.getElementById("score-list");
const muteBtn = document.getElementById("muteBtn");
const backgroundMusic = document.getElementById("background-music");


// --- Game State ---
const players = ["Faruk", "Mursi", "Veronica", "Selamn", "Hafiz"];
let playerIndex = 0;
let correctAnswer = 0;
let isMuted = false;

// Initialize scores for each player
const scores = {};
players.forEach(player => {
  scores[player] = 0;
});

const compliments = [
  ["ጎበዝ!", "Clever!"],
  ["ልክ ነህ!", "You are correct!"],
  ["በጣም ጥሩ!", "Very good!"],
  ["በትክክል!", "Exactly!"],
  ["አንተ በጣም ጎበዝ ነህ!", "You are so smart!"],
  ["ፈጣን ነህ!", "You have an excellent brain!"],
  ["ኤክሰለንት!", "What a clever answer!"],
  ["አንተ ጀግና ነህ!", "You are a hero!"],
  ["ጥሩ አስተሳሰብ ነው!", "Great thinking!"],
  ["ዋው!", "Wow!"],
  ["አገኘኸው!", "You got it!"],
  ["አንተ ኮከብ ነህ!", "You are a star!"],
  ["ግሩም ነው!", "Fantastic!"]
];


// --- Sound Functions ---
function speak(text, lang = "am-ET") {
  if (isMuted) return; // Don't speak if muted
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = lang;
  speechSynthesis.speak(utter);
}

function toggleMute() {
  isMuted = !isMuted;
  backgroundMusic.muted = isMuted;
  muteBtn.innerText = isMuted ? "Unmute" : "Mute";
  
  // If muting, stop any currently speaking text
  if (isMuted) {
    speechSynthesis.cancel();
  }
}


// --- Game Logic ---
function updateScoreboard() {
  scoreListEl.innerHTML = ""; // Clear existing scores
  for (const player in scores) {
    const li = document.createElement("li");
    li.innerText = `${player}: ${scores[player]}`;
    scoreListEl.appendChild(li);
  }
}

function newQuestion() {
  answerEl.value = "";
  answerEl.focus();

  const name = players[playerIndex];
  playerNameEl.innerText = "Your turn, " + name + "!";
  speak("እንኳን ደህና መጣህ " + name);

  const a = Math.floor(Math.random() * 10) + 1;
  const b = Math.floor(Math.random() * 10) + 1;
  const operators = ["+", "-", "×", "÷"];
  const op = operators[Math.floor(Math.random() * operators.length)];

  let questionText = "";
  if (op === "+") {
    correctAnswer = a + b;
    questionText = `${a} + ${b}`;
  } else if (op === "-") {
    // Ensure the result is not negative for simplicity
    const max = Math.max(a, b);
    const min = Math.min(a, b);
    correctAnswer = max - min;
    questionText = `${max} - ${min}`;
  } else if (op === "×") {
    correctAnswer = a * b;
    questionText = `${a} × ${b}`;
  } else if (op === "÷") {
    const dividend = a * b;
    correctAnswer = b;
    questionText = `${dividend} ÷ ${a}`;
  }

  questionEl.innerText = questionText;
  speak("ጥያቄ " + questionText.replace('×', 'ሲባዛ').replace('÷', 'ሲካፈል'));
}

function checkAnswer() {
  // Start music on the first user interaction
  if (backgroundMusic.paused) {
      backgroundMusic.volume = 0.1; // Set soft volume
      backgroundMusic.play().catch(e => console.log("Autoplay was prevented by the browser."));
  }

  const userAnswer = parseInt(answerEl.value);
  if (userAnswer === correctAnswer) {
    // Update score for the current player
    const currentPlayer = players[playerIndex];
    scores[currentPlayer]++;
    updateScoreboard();
    
    // Show compliment and play sound
    const randomCompliment = compliments[Math.floor(Math.random() * compliments.length)];
    alert(randomCompliment[0] + " - " + randomCompliment[1]);
    speak(randomCompliment[0]);
    
    // Trigger star animation
    createStars();
    
    // Move to the next player
    playerIndex = (playerIndex + 1) % players.length;
    
    // Ask the next question after a short delay
    setTimeout(newQuestion, 500);
  } else {
    alert("ትክክል አይደለም, try again!");
    speak("ትክክል አይደለም");
  }
}

// Function to create falling stars animation
function createStars() {
  const starCount = 20;
  for (let i = 0; i < starCount; i++) {
    const star = document.createElement("div");
    star.className = "star";
    star.innerHTML = "✨"; // You can use '★' or other characters
    star.style.left = `${Math.random() * 100}%`; // Random horizontal position
    star.style.animationDuration = `${Math.random() * 2 + 3}s`; // Random duration (3-5s)
    star.style.animationDelay = `${Math.random() * 2}s`; // Random start delay
    star.style.fontSize = `${Math.random() * 15 + 10}px`; // Random size
    
    // Remove the star from the DOM after animation ends to save memory
    star.addEventListener('animationend', () => {
      star.remove();
    });
    
    document.body.appendChild(star);
  }
}

// --- Initial Game Start ---
updateScoreboard();
newQuestion();

// Allow submitting with the Enter key
answerEl.addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        event.preventDefault();
        document.querySelector("button").click(); // Trigger the submit button click
    }
});

</script>
</body>
</html>
